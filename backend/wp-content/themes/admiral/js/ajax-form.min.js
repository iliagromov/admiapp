// const form = document.querySelector('#form');
// form.addEventListener('submit', (e)=>{
//   e.preventDefault();
//   console.log(1);
// })
jQuery(document).ready(function ($) {
  var form = $('#form');
  var formCallback = $('#form-callback');
 
  // Сбрасываем значения полей
  $('#form input, #form textarea').on('blur', function () {
    $('#form input, #form textarea').removeClass('error');
    $('.notification').remove();
    $('#form .form_submit').val('Отправить');
  });

  $('#form-callback input, #form-callback textarea').on('blur', function () {
    $('#form-callback input, #form-callback textarea').removeClass('error');
    $('.notification').remove();
    $('#form-callback .form_submit').val('Отправить');
  });

  form.on('submit', function (e) {
    e.preventDefault();
    var name = $('#form .form_name').val();
    var tel =  $('#form .form_tel').val();
    var utm =  $('#form .utm').val();
    var url =  $('#form .url').val();
    // Отправка значений полей
    var options = {
      url: ajax_form_object.url,
      data: {
        action: 'ajax_form_action',
        nonce: ajax_form_object.nonce,
        'form_name': name,
        'form_tel': tel,
        'utm': utm,
        'url': url,
      },
      type: 'POST',
      dataType: 'json',
      beforeSubmit: function (xhr) {
        // При отправке формы меняем надпись на кнопке
        $('#form .form_submit').val('Отправляем...');
      },
      success: function (request, xhr, status, error) {

        if (request.success === true) {
          // Если все поля заполнены, отправляем данные и меняем надпись на кнопке
          form.after('<div class="notification notification_accept">' + request.data + '</div>').slideDown();
          $('#form .form_submit').val('Отправить');
        } else {
          // Если поля не заполнены, выводим сообщения и меняем надпись на кнопке
          $.each(request.data, function (key, val) {
            $('.form_' + key).addClass('error');
            $('.form_' + key).after('<div class="notification notification_warning notification_warning_' + key + '">' + val + '</div>');
          });
          $('#form .form_submit').val('Что-то пошло не так...');
        }
        // При успешной отправке сбрасываем значения полей
        $('#form')[0].reset();
      },
      error: function (request, status, error) {
        $('#form .form_submit').val('Что-то пошло не так...');
      }
    };
    // Отправка формы
    $.ajax(options);
  })

  formCallback.on('submit', function (e) {
    e.preventDefault();
    var name = $('#form-callback .form_name').val();
    var tel =  $('#form-callback .form_tel').val();
    var utm =  $('#form-callback .utm').val();
    var url =  $('#form-callback .url').val();
    // Отправка значений полей
    var options = {
      url: ajax_form_object.url,
      data: {
        action: 'ajax_form_action',
        nonce: ajax_form_object.nonce,
        'form_name': name,
        'form_tel': tel,
        'utm': utm,
        'url': url,
      },
      type: 'POST',
      dataType: 'json',
      beforeSubmit: function (xhr) {
        // При отправке формы меняем надпись на кнопке
        $('#form-callback .form_submit').val('Отправляем...');
      },
      success: function (request, xhr, status, error) {

        if (request.success === true) {
          // Если все поля заполнены, отправляем данные и меняем надпись на кнопке
          forformCallbackm.after('<div class="notification notification_accept">' + request.data + '</div>').slideDown();
          $('#form-callback .form_submit').val('Отправить');
        } else {
          // Если поля не заполнены, выводим сообщения и меняем надпись на кнопке
          $.each(request.data, function (key, val) {
            $('.form_' + key).addClass('error');
            $('.form_' + key).after('<div class="notification notification_warning notification_warning_' + key + '">' + val + '</div>');
          });
          $('#form-callback .form_submit').val('Что-то пошло не так...');
        }
        // При успешной отправке сбрасываем значения полей
        $('#form-callback')[0].reset();
      },
      error: function (request, status, error) {
        $('#form-callback .form_submit').val('Что-то пошло не так...');
      }
    };
    // Отправка формы
    $.ajax(options);
  })

});